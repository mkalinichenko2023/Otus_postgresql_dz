# Домашнее задание к уроку 23. Хранимые функции и процедуры #   
1. Создала виртуальную машину в Yandex-Cloud. (IP адрес 158.60.75.113)   
![Шаг4](/23_01_vm.jpg)  
Установила PostgreSQL 15.   
![Шаг4](/23_02_postgres.jpg)  
![Шаг4](/23_03_cluster.jpg)  
1. Создала таблицы "товары" и "продажи" согласно рекомендациям файла hw_triggers.sql (приложенного к описанию ДЗ).   
![Шаг4](/23_04_tables.jpg)  
1. Заполнила таблицы данными и получила отчет через Select.  
![Шаг4](/23_05_report.jpg)  
1. Создала и заполнила витрину good_sum_mart согласно рекомендациям файла hw_triggers.sql (приложенного к описанию ДЗ).  
![Шаг4](/23_06_vitrina.jpg)  
1. Создала функцию на изменение данных в витрине good_sum_mart при вставке новой строки в таблицу sales.   
![Шаг4](/23_07_func1.jpg)  
1. Создала функцию на изменение данных в витрине good_sum_mart при удалении строки из таблицы sales.   
![Шаг4](/23_07_func2.jpg)  
1. Создала функцию на изменение данных в витрине good_sum_mart при изменении строки в таблице sales.   
![Шаг4](/23_07_func3_2.jpg)  
1. Создала триггеры с условием после вставки, после удаления и после изменения каждой строки на таблицу sales.   
![Шаг4](/23_08_trigg.jpg)   
1. Вставила новые строки в таблицу sales, проверила, что данные в витрине good_sum_mart изменились.   
![Шаг4](/23_09_insert.jpg)   
1. Изменила количество в строке таблицы sales, проверила, что данные в витрине good_sum_mart изменились.   
![Шаг4](/23_09_update.jpg)   
1. Удалила строку таблицу sales, проверила, что данные в витрине good_sum_mart изменились.   
![Шаг4](/23_09_delete.jpg)   
## Вопрос "Чем такая схема (витрина+триггер) предпочтительнее отчета, создаваемого "по требованию"?"  ##
Витрина с триггерами на поддержание в актуальном состоянии была создана по заданию с целью ускорения получения отчета о суммарных продажах.
Согласно подсказке в ДЗ данная витрина должна решить проблему изменения цены товара.
В таблице goods цена указана в виде одного поля и при изменении этой цены, мы без витрины уже не сможем сказать сколько мы получили на продаже товаров по старой цене.
В реальности таблица товаров должна иметь еще поля начальной и конечной даты, определяющие интервал действия конкретной стоимости товара. В этом случае расчет продаж можно производить и без витрины good_sum_mart.
