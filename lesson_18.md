# Домашнее задание к уроку 18. Работа с индексами, join'ами, статистикой #   
## Вариант 1. Создать индексы на БД, которые ускорят доступ к данным. ##   
1. Создала виртуальную машину в Yandex-Cloud. (IP адрес 158.160.24.50)   
![Шаг4](/18_01_vm.jpg)  
1. Установила PostgreSQL 15.   
![Шаг4](/18_02_postgres.jpg)  
![Шаг4](/18_03_cluster.jpg)  
1. Выполнять задания решила на готовой демо базе (как в дз к 20-занятию). Скачала базу, распакова и загрузила в установленный Postgres.  
![Шаг4](/18_04_get_arh.jpg)
![Шаг4](/18_05_insert_bd.jpg)
![Шаг4](/18_00_db.jpg)
1. Посмотрела, какие индексы есть на таблице flights.  
![Шаг4](/18_06_view_ind.jpg)  
1. Решила создать индексы по полям departure_airport (аэропорт вылета) и arrival_airport (аэропорт прибытия).  
![Шаг4](/18_07_create_ind.jpg)  
Выполнила поиск кол-ва рейсов, отправляющихся из Внуково. Проверила план, индекс flights_dep_airport используется.  
![Шаг4](/18_08_use_ind1.jpg)  
Выполнила поиск кол-ва рейсов, прибывающих в Пулково. Проверила план, индекс flights_arr_airport используется.  
![Шаг4](/18_09_use_ind2.jpg)  
1. С целью показать реализацию индекса для полнотекстового поиска создала новое поле в таблице tickets и заполнила его контактной информацией пассажира через вызов to_tsvector.  
*alter table bookings.tickets add column tsv_contact_data tsvector;*  
*update bookings.tickets set tsv_contact_data = to_tsvector('english',contact_data);*  
Создала индекс для полнотекстового поиска по полю tsv_contact_data, попробовала найти пассажира по номеру телефона и проверила командой explain, что индекс задействован.  
![Шаг4](/18_10_txt_ind.jpg)  
1. Пример реализации индекса на часть таблицы сделала по таблице flights. В таблице есть поле status. Посмотрела, какие статусы есть в таблице и решила выделить в отдельный поиск рейсы, которые еще не выполнены (статус Scheduled). Проверила, что индекс используется.  
*create index flights_status on bookings.flights(status) where status='Scheduled';*   
![Шаг4](/18_11_part_ind1.jpg)  
1. Индекс на несколько полей таже создала по таблице flights. Выбрала поля дата прибытия и номер рейса. Проверила, что индекс используется.   
![Шаг4](/18_12_2field_ind.jpg)  
1. .  
![Шаг4](/.jpg)  
1. .  
![Шаг4](/.jpg)  
1. .  
![Шаг4](/.jpg)  


