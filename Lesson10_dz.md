# Домашнее задание к уроку 10. #   
1. В Yandex-Cloud от выполнения первого дз у меня осталась виртуальная машина и установленный PostgreSQL 15.   
![Шаг4](/4_1_OldVM.jpg)  
1. Проверила состояние параметра интервала контрольной точки checkpoint_timeout.  
![Шаг4](/10_1_chp_to_before.jpg)  
Выполнила настройку контрольной точки раз в 30 секунд. Поменяла checkpoint_timeout через alter system и перезагрузила конфигурацию.   
![Шаг4](/10_2_chp_to_after.jpg)  
1. Подготовила утилиту pgbench к запуску.   
![Шаг4](/10_3_pgbench_start.jpg)  
Cохранила данные по количеству контрольных точек и текущему LSN.  
![Шаг4](/10_4_pgbench_before.jpg)   
Подала нагрузку на 10 минут c помощью утилиты pgbench.   
![Шаг4](/10_5_pgbench.jpg)  
Cохранила данные по количеству контрольных точек и текущему LSN.  
![Шаг4](/10_6_pgbench_after.jpg)  
**Видим, что количество выполненных контрольных точек за 10мин 51-15=36. Это число больше, чем 20 точек (600сек/30сек).**    
Определим число байт в журнале предзаписи (WAL) до и после выполнения утилиты pgbench (нужно было наооборот вычитать из конца начало, тогда не было бы минуса):   
![Шаг4](/10_7_pgbench_size.jpg)   
**Получим, что на одну контрольную точку приходится 466246296/36 = 12 951 286, т.е. примерно 12Мб.**
![Шаг4](/checkpoint_timeout.jpg)  
![Шаг4](/checkpoint_timeout.jpg)  
10 минут c помощью утилиты pgbench подавайте нагрузку.
Измерьте, какой объем журнальных файлов был сгенерирован за это время. Оцените, какой объем приходится в среднем на одну контрольную точку.
Проверьте данные статистики: все ли контрольные точки выполнялись точно по расписанию. Почему так произошло?
Сравните tps в синхронном/асинхронном режиме утилитой pgbench. Объясните полученный результат.
Создайте новый кластер с включенной контрольной суммой страниц. Создайте таблицу. Вставьте несколько значений. Выключите кластер. Измените пару байт в таблице. Включите кластер и сделайте выборку из таблицы. Что и почему произошло? как проигнорировать ошибку и продолжить работу?
